{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./components/dynamic-adaptive/js/dynamic-adaptive.js","webpack:///./components/dynamic-adaptive/js/index.js","webpack:///./components/dynamic-adaptive/js/init-dynamic-adaptive.js"],"names":["BASE_WINDOW_WIDTH","DynamicAdaptive","type","_objects","_daClassName","_nodes","document","querySelectorAll","forEach","node","data","dataset","da","trim","dataArray","split","object","element","parent","parentNode","destination","querySelector","breakpoint","place","index","_indexInParent","push","_arraySort","_mediaQueries","map","item","filter","indexOf","media","mediaSplit","String","matchMedia","window","mediaBreakpoint","objectsFilter","addListener","_mediaHandler","objects","matches","_moveTo","classList","contains","_moveBack","add","children","length","append","prepend","before","remove","array","Array","from","slice","sort","a","b","addEventListener","initDynamicAdaptive","init"],"mappings":"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","file":"dynamicAdaptive.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./components/dynamic-adaptive/js/index.js\");\n","const BASE_WINDOW_WIDTH = '767';\n\nexport class DynamicAdaptive {\n  constructor(type) {\n    this.type = type;\n  }\n\n  init() {\n    // массив объектов\n    this._objects = [];\n    this._daClassName = 'dynamic-adaptive';\n    // массив DOM-элементов\n    this._nodes = document.querySelectorAll('[data-da]');\n\n    // наполнение objects объектами\n    this._nodes.forEach((node) => {\n      const data = node.dataset.da.trim();\n      const dataArray = data.split(',');\n      const object = {};\n      object.element = node;\n      object.parent = node.parentNode;\n      object.destination = document.querySelector(dataArray[0].trim());\n      object.breakpoint = dataArray[1] ? dataArray[1].trim() : BASE_WINDOW_WIDTH;\n      object.place = dataArray[2] ? dataArray[2].trim() : 'last';\n      object.index = this._indexInParent(object.parent, object.element);\n      this._objects.push(object);\n    });\n\n    this._arraySort();\n\n    // массив уникальных медиа-запросов\n    this._mediaQueries = this._objects.map((item) => {\n      return `(${this.type}-width: ${item.breakpoint}px),${item.breakpoint}`;\n    });\n    this._mediaQueries = this._mediaQueries.filter((item, index) => {\n      return this._mediaQueries.indexOf(item) === index;\n    });\n\n    // навешивание слушателя на медиа-запрос\n    // и вызов обработчика при первом запуске\n    this._mediaQueries.forEach((media) => {\n      const mediaSplit = String(media).split(',');\n      const matchMedia = window.matchMedia(mediaSplit[0]);\n      const mediaBreakpoint = mediaSplit[1];\n\n      // массив объектов с подходящим брейкпоинтом\n      const objectsFilter = this._objects.filter((item) => {\n        return item.breakpoint === mediaBreakpoint;\n      });\n      matchMedia.addListener(() => {\n        this._mediaHandler(matchMedia, objectsFilter);\n      });\n      this._mediaHandler(matchMedia, objectsFilter);\n    });\n  }\n\n  _mediaHandler(matchMedia, objects) {\n    if (matchMedia.matches) {\n      objects.forEach((object) => {\n        object.index = this._indexInParent(object.parent, object.element);\n        this._moveTo(object.place, object.element, object.destination);\n      });\n    } else {\n      objects.forEach((object) => {\n        if (object.element.classList.contains(this._daClassName)) {\n          this._moveBack(object.parent, object.element, object.index);\n        }\n      });\n    }\n  }\n\n  // Функция перемещения\n  _moveTo(place, element, destination) {\n    element.classList.add(this._daClassName);\n    if (place === 'last' || place >= destination.children.length) {\n      destination.append(element);\n      return;\n    }\n    if (place === 'first') {\n      destination.prepend(element);\n      return;\n    }\n    destination.children[place].before(element);\n  }\n\n  // Функция возврата\n  _moveBack(parent, element, index) {\n    element.classList.remove(this._daClassName);\n    if (parent.children[index]) {\n      parent.children[index].before(element);\n    } else {\n      parent.append(element);\n    }\n  }\n\n  // Функция получения индекса внутри родителя\n  _indexInParent(parent, element) {\n    const array = Array.from(parent.children).slice();\n    return array.indexOf(element);\n  }\n\n  // Функция сортировки массива по breakpoint и place\n  // по возрастанию для this.type = min\n  // по убыванию для this.type = max\n  _arraySort() {\n    if (this.type === 'min') {\n      this._objects.sort((a, b) => {\n        if (a.breakpoint === b.breakpoint) {\n          if (a.place === b.place) {\n            return 0;\n          }\n\n          if (a.place === 'first' || b.place === 'last') {\n            return -1;\n          }\n\n          if (a.place === 'last' || b.place === 'first') {\n            return 1;\n          }\n\n          return a.place - b.place;\n        }\n\n        return a.breakpoint - b.breakpoint;\n      });\n    }\n    if (this.type === 'max') {\n      this._objects.sort((a, b) => {\n        if (a.breakpoint === b.breakpoint) {\n          if (a.place === b.place) {\n            return 0;\n          }\n\n          if (a.place === 'first' || b.place === 'last') {\n            return 1;\n          }\n\n          if (a.place === 'last' || b.place === 'first') {\n            return -1;\n          }\n\n          return b.place - a.place;\n        }\n\n        return b.breakpoint - a.breakpoint;\n      });\n    }\n  }\n}\n","import {initDynamicAdaptive} from './init-dynamic-adaptive';\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  window.addEventListener('load', () => {\n    initDynamicAdaptive();\n  });\n});\n","import {DynamicAdaptive} from './dynamic-adaptive';\n\nconst initDynamicAdaptive = () => {\n  const da = new DynamicAdaptive('max');\n  da.init();\n};\n\nexport {initDynamicAdaptive};\n"],"sourceRoot":""}